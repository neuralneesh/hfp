scenarios:
  - id: map_drop_activates_raas
    label: MAP drop should activate RAAS and compensation
    perturbations:
      - node_id: cardio.hemodynamics.map
        op: decrease
    context: {}
    max_hops: 10
    assertions:
      - target: renal.raas.renin
        expected: up
        min_path_len: 2
      - target: renal.raas.angiotensin_ii
        expected: up
        min_path_len: 3
      - target: renal.raas.aldosterone
        expected: up
        min_path_len: 4

  - id: hypoventilation_acidemia
    label: Hypoventilation should increase PaCO2 and lower pH
    perturbations:
      - node_id: pulm.ventilation.alveolar_ventilation
        op: decrease
    context: {}
    max_hops: 8
    assertions:
      - target: pulm.gasexchange.paco2
        expected: up
        min_path_len: 2
      - target: acidbase.blood.ph
        expected: down
        min_path_len: 4

  - id: hypoxia_autonomic_response
    label: Hypoxia should increase sympathetic output and HR
    perturbations:
      - node_id: pulm.gasexchange.pao2
        op: decrease
    context: {}
    max_hops: 8
    assertions:
      - target: neuro.ans.sympathetic_tone
        expected: up
        min_path_len: 2
      - target: cardio.hemodynamics.heart_rate
        expected: up
        min_path_len: 3

  - id: ace_inhibitor_blocks_aldosterone_axis
    label: ACE inhibitor context should block renin-to-aldosterone effect
    perturbations:
      - node_id: renal.raas.renin
        op: increase
    context:
      ace_inhibitor: true
    max_hops: 8
    assertions:
      - target: renal.raas.angiotensin_ii
        expected: up
        min_path_len: 2
      - target: renal.raas.aldosterone
        expected: down

  - id: ckd_impairs_volume_compensation
    label: CKD context should blunt renal volume compensation
    perturbations:
      - node_id: renal.raas.renin
        op: increase
    context:
      ckd: true
    max_hops: 8
    assertions:
      - target: renal.metabolism.potassium
        expected: up
        min_path_len: 1

  - id: copd_context_only_syndrome_presence
    label: Context-only COPD run should still generate syndrome summaries
    perturbations: []
    context:
      copd: true
    max_hops: 10
    assertions:
      - target: neuro.ans.sympathetic_tone
        expected: up
        min_path_len: 4
        require_summary: true

  - id: edv_stretch_triggers_anp_early
    label: EDV increase should trigger ANP/BNP early via direct cardiac stretch path
    perturbations:
      - node_id: cardio.cycle.end_diastolic_volume
        op: increase
    context: {}
    max_hops: 8
    assertions:
      - target: renal.metabolism.anp_bnp
        expected: up
        min_path_len: 2
        at_tick: 0
